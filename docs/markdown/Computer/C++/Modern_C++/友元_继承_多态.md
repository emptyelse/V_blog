# oopè¿›é˜¶

## å‹å…ƒ
C++ä½“ç³»ä¸­æ²¡æœ‰å¾ˆå¤šåŠ é”å’Œè§£é”çš„çŸ¥è¯†ç‚¹ï¼Œå‹å…ƒå°±æ˜¯å…¶ä¸€ã€‚
1. å‹å…ƒå‡½æ•°å’Œå‹å…ƒç±»ï¼Œå¯ä»¥è®¿é—®ç±»çš„ç§æœ‰ï¼ˆprivateï¼‰æˆå‘˜å’Œå—ä¿æŠ¤ï¼ˆprotectedï¼‰æˆå‘˜ã€‚
2. å…³é”®å­— friend

### å‹å…ƒå‡½æ•°
1. å‹å…ƒå‡½æ•°å£°æ˜åªèƒ½å‡ºç°åœ¨ç±»å®šä¹‰çš„å†…éƒ¨ï¼Œå®ƒä¸æ˜¯æˆå‘˜å‡½æ•°ï¼Œå‡ºç°çš„ä½ç½®åœ¨ç±»ä½“ä¸­ï¼Œå‡½æ•°ä½“å¤–ã€‚ finrend è¿”å›ç±»å‹ å‡½æ•°å(å‚æ•°åˆ—è¡¨)
::: details firend Mathod
åœ¨`cat.h`ä¸­ åˆ›å»ºcatç±» å¹¶å£°æ˜ä¸€ä¸ªå‹å…ƒå‡½æ•°`cat_info `
```cpp
class Cat {
public:
  Cat(const string &name,int age): name(name), age(age) {}
  friend void cat_info(const Cat &cat);

private:
  string name;
  int age;
};
```
åœ¨ `main.h`ä¸­å®ç°å¹¶ä½¿ç”¨
```cpp
using namespace std;
void cat_info(const Cat& c){
  cout<<"Name: "<<c.name<<",Age:"<<c.age<<endl;
}

int main(int argc, char *argv[]) {
  Cat c("Tom",2);
  cat_info(c);
  return 0;
}
``` 
::: 


### å‹å…ƒç±»
1. å‹å…ƒç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å‡½æ•°éƒ½æ˜¯å¦ä¸€ä¸ªç±»çš„å‹å…ƒå‡½æ•°ï¼Œéƒ½å¯ä»¥è®¿é—®å¦ä¸€ä¸ªç±»çš„ç§æœ‰å’Œä¿æŠ¤æˆå‘˜ã€‚
2. å‹å…ƒå…³ç³»æ˜¯å•å‘çš„ï¼Œä¸å…·æœ‰ä¼ é€’æ€§ã€‚å¦‚æœç±»Bæ˜¯ç±»Açš„å‹å…ƒï¼Œç±»Cæ˜¯ç±»Bçš„å‹å…ƒï¼Œç±»Cä¸ä¸€å®šæ˜¯ç±»Açš„å‹å…ƒï¼ŒåŒæ ·ç±»Aä¸æ˜¯ç±»Cçš„å‹å…ƒã€‚
::: details firend Class
åœ¨`person.h`ä¸­åˆ›å»º`class Person`
```cpp
#pragma once
#include "cat.h"
#include <iostream>
using namespace std;
class Person {
public:
  Person()=default;
  void cat_info(const Cat &c) const {
    cout<<"Name: "<<c.name<<",Age:"<<c.age<<endl;
  }
};
```
å¹¶åœ¨`cat.h`ä¸­å£°æ˜`Person`ä¸ºå‹å…ƒç±» ``friend class Person;``
ç„¶åä½¿ç”¨ï¼š
```cpp
using namespace std;
int main(int argc, char *argv[]) {
  Cat c("Tom",2);
  Person p;
  p.cat_info(c);
  return 0;
}
```
:::

### å‹å…ƒå®ä¾‹ ï¼š\<\< æ‰“å°å‡½æ•°


## ç»§æ‰¿

1. é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µ
2. ç»§æ‰¿çš„ç”¨å¤„ï¼šä»£ç é‡ç”¨ï¼Œå‡å°‘å†—ä½™ä»£ç 
3. C++æ”¯æŒå¤šç»§æ‰¿ï¼Œæœ‰ public,protected,privateä¸‰ç§ç»§æ‰¿æ–¹å¼ï¼Œé»˜è®¤ ä¸ºpublicç»§æ‰¿
::: info **ä¸ªäººè®¤ä¸º**:
1. å¤šç»§æ‰¿æ²¡æœ‰å¿…è¦
2. å°½é‡å°‘ç”¨privateç»§æ‰¿å’Œprotectedç»§æ‰¿
3. åµŒå…¥ä¼˜äºç»§æ‰¿
:::
### ç»§æ‰¿ä¸æ„é€ å‡½æ•°ä¸ææ„å‡½æ•°
1. åœ¨ä½¿ç”¨ç»§æ‰¿æ—¶,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•æ„é€ å¯¹è±¡
2. æ¨èåœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°

::: details ç»§æ‰¿ä¸æ„é€ å‡½æ•°ä¸ææ„å‡½æ•°
åœ¨`person.h `ä¸­æ„é€ çˆ¶ç±» `Person`ï¼š
```cpp [person.h/.cpp]
class Person {
public:
  Person()=default;
  Person(string_view name, int age, string_view address);
  Person(const Person& p);
  ~Person();
  void doSome() const;
  friend ostream& operator<<(ostream& os, const Person& p);
protected:
  int age{0};
  string name{"DEFAULT NAME"};
  string address{"DEFAULT ADDRESS"};
};


#include "person.h"

Person::Person(string_view name, int age, string_view address): name(name), age(age), address(address) {
  cout<<"Person created"<<endl;
}

Person::Person(const Person &p) {
  cout<<"Person copied"<<endl;
  name = p.name;
  age = p.age;
  address = p.address;
}

Person::~Person() {
  cout<<"Person destroyed"<<endl;
}

void Person::doSome() const {
  cout<<"Person doing something"<<endl;
}

ostream &operator<<(ostream &os, const Person &p) {
  os<<"Person: "<<p.name<<", Age: "<<p.age<<", Address: "<<p.address;
  return os;
}
```
åœ¨ `Worker.h`ä¸­æ„é€ å­ç±» `Worker`ï¼š
```cpp [worker.h/.cpp]
#include "person.h"
class Worker : public Person{
public:
  Worker()=default;
  Worker(string_view job);
  Worker(string_view job,int age);
  Worker(string_view name,string_view address,string_view job,int age);
  Worker(const Worker& worker);
  ~Worker();
  friend ostream& operator<<(ostream& os, const Worker& worker);

private:
  string job{"DEFAULT JOB"};
};
#include "worker.h"

Worker::Worker(string_view job): job(job) {
  cout<<"Worker constructor called"<<endl;
}

Worker::Worker(string_view job, int age): job(job) {
  this->age = age;
  cout<<"Worker constructor called"<<endl;
}

Worker::Worker(string_view name, string_view address, string_view job, int age):Person(name,age,address), job(job) {
  cout<<"Worker constructor called"<<endl;

}

Worker::Worker(const Worker &worker): Person(worker), job(worker.job) {
  cout<<"Worker Copy constructor called"<<endl;
}

Worker::~Worker() {
  cout<<"Worker destructor called"<<endl;
}

ostream &operator<<(ostream &os, const Worker &worker) {
  os<<"Worker Name: "<<worker.name<<"\t Age: "<<worker.age<<"\t Address: "<<worker.address<<"\t Job: "<<worker.job<<endl;
  return os;
}

```
åœ¨ `main.cpp`ä¸­æµ‹è¯•ï¼š
```cpp [main.cpp]
int main{
  Worker w1("Name1","Address1","JOB1",1);
  cout<<w1<<endl;
  Worker w2(w1);
  cout<<"-----------------------------------"<<endl;
}
```
è¿è¡Œç»“æœï¼š
```text [main.cpp]
Person created
Worker constructor called
Worker Name: Name1       Age: 1  Address: Address1       Job: JOB1

Person copied
Worker Copy constructor called
-----------------------------------
Worker destructor called
Person destroyed
Worker destructor called
Person destroyed
```
:::


### protectedç»§æ‰¿ä¸privateç»§æ‰¿

C++ ä¸­çš„ **public**ã€**protected** å’Œ **private** ç»§æ‰¿ä¿®é¥°ç¬¦çš„è®¾è®¡æ„ä¹‰åœ¨äºï¼Œå®ƒä»¬ä¸ºç»§æ‰¿å…³ç³»å¼•å…¥äº†çµæ´»çš„è®¿é—®æ§åˆ¶æœºåˆ¶ã€‚é€šè¿‡è¿™äº›ä¿®é¥°ç¬¦ï¼Œå¯ä»¥å®šä¹‰å­ç±»å¦‚ä½•è®¿é—®åŸºç±»çš„æˆå‘˜ï¼Œå¹¶æ§åˆ¶åŸºç±»æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„å¯è§æ€§ä»¥åŠæ˜¯å¦å¯¹å¤–æš´éœ²ã€‚è¿™ç§çµæ´»æ€§æ»¡è¶³äº†é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚

---

#### 1. **ä¸‰ç§ç»§æ‰¿ä¿®é¥°ç¬¦çš„ä½œç”¨**
å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŸºç±» `Base`ï¼Œå…¶ä¸­åŒ…å« `public`ã€`protected` å’Œ `private` æˆå‘˜ï¼š
```cpp
class Base {
public:
    int public_member;
protected:
    int protected_member;
private:
    int private_member;
};
```
ä»¥ä¸‹æ˜¯ä¸‰ç§ç»§æ‰¿ä¿®é¥°ç¬¦çš„å…·ä½“è¡Œä¸ºï¼š

##### (1) **public ç»§æ‰¿**  
`Base` çš„ `public` å’Œ `protected` æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä¿æŒåŸæ¥çš„è®¿é—®æƒé™ï¼š
- **public** æˆå‘˜ä»ç„¶æ˜¯ **public**ã€‚
- **protected** æˆå‘˜ä»ç„¶æ˜¯ **protected**ã€‚
- **private** æˆå‘˜å§‹ç»ˆä¸å¯è®¿é—®ã€‚

```cpp
class Derived : public Base {
    void func() {
        public_member = 1;   // å¯è®¿é—®
        protected_member = 2; // å¯è®¿é—®
        // private_member = 3; // é”™è¯¯ï¼Œprivate æˆå‘˜ä¸èƒ½è®¿é—®
    }
};
```

##### (2) **protected ç»§æ‰¿**  
`Base` çš„ `public` å’Œ `protected` æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­éƒ½å˜ä¸º **protected**ï¼š
- **public** æˆå‘˜é™çº§ä¸º **protected**ã€‚
- **protected** æˆå‘˜ä»ç„¶æ˜¯ **protected**ã€‚
- **private** æˆå‘˜ä»ç„¶ä¸å¯è®¿é—®ã€‚

```cpp
class Derived : protected Base {
    void func() {
        public_member = 1;   // å¯è®¿é—®ï¼Œä½†å¯¹å¤–ä¸å¯è§
        protected_member = 2; // å¯è®¿é—®
        // private_member = 3; // é”™è¯¯ï¼Œprivate æˆå‘˜ä¸èƒ½è®¿é—®
    }
};
Derived d;
// d.public_member = 1; // é”™è¯¯ï¼Œpublic_member å˜ä¸º protected
```

##### (3) **private ç»§æ‰¿**  
`Base` çš„æ‰€æœ‰ `public` å’Œ `protected` æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­éƒ½å˜ä¸º **private**ï¼š
- **public** æˆå‘˜é™çº§ä¸º **private**ã€‚
- **protected** æˆå‘˜ä¹Ÿé™çº§ä¸º **private**ã€‚
- **private** æˆå‘˜ä»ç„¶ä¸å¯è®¿é—®ã€‚

```cpp
class Derived : private Base {
    void func() {
        public_member = 1;   // å¯è®¿é—®ï¼Œä½†å¯¹å¤–ä¸å¯è§
        protected_member = 2; // å¯è®¿é—®
        // private_member = 3; // é”™è¯¯ï¼Œprivate æˆå‘˜ä¸èƒ½è®¿é—®
    }
};
Derived d;
// d.public_member = 1; // é”™è¯¯ï¼Œpublic_member åœ¨ Derived ä¸­æ˜¯ private
```

---

#### 2. **è®¾è®¡æ„ä¹‰**
C++ å¼•å…¥è¿™ä¸‰ç§ç»§æ‰¿ä¿®é¥°ç¬¦ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ»¡è¶³ä¸åŒçš„è®¾è®¡éœ€æ±‚ï¼š

##### (1) **æ§åˆ¶ç»§æ‰¿çš„è®¿é—®èŒƒå›´**
é€šè¿‡è®¾ç½®ç»§æ‰¿ä¿®é¥°ç¬¦ï¼Œå¯ä»¥æ§åˆ¶åŸºç±»çš„æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®çº§åˆ«ï¼Œä»¥åŠæ´¾ç”Ÿç±»å¯¹å¤–éƒ¨æš´éœ²çš„æ¥å£ã€‚  
ä¾‹å¦‚ï¼š
- å¦‚æœä¸€ä¸ªç±»çš„åŠŸèƒ½éœ€è¦å®Œå…¨ç»§æ‰¿å¹¶å‘å¤–éƒ¨å…¬å¼€ï¼Œä½¿ç”¨ **public ç»§æ‰¿**ã€‚
- å¦‚æœåªå¸Œæœ›å­ç±»èƒ½å¤Ÿè®¿é—®åŸºç±»æˆå‘˜ï¼Œä½†ä¸å¸Œæœ›å¤–éƒ¨è®¿é—®ï¼Œä½¿ç”¨ **protected ç»§æ‰¿**ã€‚
- å¦‚æœåªå¸Œæœ›åœ¨å­ç±»ä¸­ä½¿ç”¨åŸºç±»æˆå‘˜ä½œä¸ºå®ç°ç»†èŠ‚ï¼Œä¸å‘å¤–éƒ¨æš´éœ²ï¼Œä½¿ç”¨ **private ç»§æ‰¿**ã€‚

##### (2) **è¡¨è¾¾è¯­ä¹‰å…³ç³»**
ç»§æ‰¿ä¿®é¥°ç¬¦ä¸ä»…æ˜¯æŠ€æœ¯å®ç°ä¸Šçš„å·¥å…·ï¼Œè¿˜å¯ä»¥è¡¨è¾¾ç»§æ‰¿å…³ç³»çš„è¯­ä¹‰ï¼š
- **public ç»§æ‰¿**ï¼šè¡¨ç¤ºå­ç±»æ˜¯åŸºç±»çš„ç‰¹åŒ–ï¼Œæ˜¯ä¸€ç§â€œ**is-a**â€çš„å…³ç³»ã€‚  
  ä¾‹å¦‚ï¼š
  ```cpp
  class Vehicle {};
  class Car : public Vehicle {}; // Car æ˜¯ä¸€ç§ Vehicle
  ```
- **protected/private ç»§æ‰¿**ï¼šè¡¨ç¤ºå­ç±»ä»…ä»…æ˜¯åŸºç±»å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯åŸºç±»çš„ä¸€ç§ç±»å‹ï¼Œæ˜¯ä¸€ç§â€œ**implemented-in-terms-of**â€çš„å…³ç³»ã€‚  
  ä¾‹å¦‚ï¼š
  ```cpp
  class Logger {};
  class FileHandler : private Logger {}; // FileHandler çš„å®ç°éœ€è¦æ—¥å¿—åŠŸèƒ½ï¼Œä½† FileHandler ä¸æ˜¯ä¸€ç§ Logger
  ```

##### (3) **å®ç°å°è£…å’Œä¿¡æ¯éšè—**
ç»§æ‰¿ä¿®é¥°ç¬¦æä¾›äº†ä¸€ç§æ§åˆ¶æœºåˆ¶ï¼Œå…è®¸å¼€å‘è€…éšè—åŸºç±»çš„å†…éƒ¨ç»†èŠ‚ï¼Œå¢å¼ºå°è£…æ€§ï¼š
- **protected ç»§æ‰¿**ï¼šå¯¹å­ç±»å¼€æ”¾ç»†èŠ‚ï¼Œä½†å¯¹å¤–éƒ¨éšè—ã€‚
- **private ç»§æ‰¿**ï¼šå®Œå…¨éšè—åŸºç±»çš„ç»†èŠ‚ï¼Œå°†åŸºç±»æˆå‘˜ä½œä¸ºå­ç±»çš„å®ç°ç»†èŠ‚ã€‚

##### (4) **é€‚åº”å¤šæ ·åŒ–éœ€æ±‚**
åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸åŒåœºæ™¯å¯èƒ½å¯¹ç»§æ‰¿å…³ç³»æœ‰ä¸åŒçš„è¦æ±‚ï¼š
- **å…¬å…± API çš„ç»§æ‰¿ï¼ˆpublic ç»§æ‰¿ï¼‰**ï¼šå¯¹å¤–æä¾›ä¸€è‡´çš„æ¥å£ã€‚
- **å·¥å…·ç±»çš„ç»§æ‰¿ï¼ˆprivate ç»§æ‰¿ï¼‰**ï¼šå¤ç”¨å·¥å…·ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸æš´éœ²å…¶æ¥å£ã€‚
- **å†…éƒ¨æ¥å£çš„ç»§æ‰¿ï¼ˆprotected ç»§æ‰¿ï¼‰**ï¼šåœ¨ç±»å±‚æ¬¡ç»“æ„å†…éƒ¨å…±äº«åŠŸèƒ½ã€‚

---

#### 3. **å®é™…åœºæ™¯ç¤ºä¾‹**

##### (1) **public ç»§æ‰¿ï¼šç‰¹åŒ–ä¸€ä¸ªç±»**
```cpp
class Shape {
public:
    virtual void draw() = 0;
};

class Circle : public Shape {
public:
    void draw() override {
        std::cout << "Drawing Circle" << std::endl;
    }
};
```
`Circle` æ˜¯ä¸€ç§ `Shape`ï¼Œéœ€è¦å…¬å¼€æ‰€æœ‰ `Shape` çš„æ¥å£ã€‚

---

##### (2) **protected ç»§æ‰¿ï¼šå®ç°å†…éƒ¨å·¥å…·**
```cpp
class Printer {
protected:
    void print(const std::string& msg) {
        std::cout << msg << std::endl;
    }
};

class ReportGenerator : protected Printer {
public:
    void generateReport() {
        print("Generating report...");
    }
};
```
`Printer` çš„åŠŸèƒ½ä»…ä¾› `ReportGenerator` å†…éƒ¨ä½¿ç”¨ï¼Œå¯¹å¤–éƒ¨ä¸å¯è§ã€‚

---

##### (3) **private ç»§æ‰¿ï¼šå®ç°ç»†èŠ‚å°è£…**
```cpp
class Engine {
public:
    void start() {
        std::cout << "Engine started" << std::endl;
    }
};

class Car : private Engine {
public:
    void drive() {
        start(); // ä½¿ç”¨ Engine çš„åŠŸèƒ½
        std::cout << "Driving..." << std::endl;
    }
};
```
`Engine` æ˜¯ `Car` çš„å®ç°ç»†èŠ‚ï¼Œå¯¹å¤–éƒ¨éšè—ã€‚

---

#### 4. **æ€»ç»“**

| **ç»§æ‰¿ä¿®é¥°ç¬¦** | **åŸºç±»æˆå‘˜å¯è§æ€§**        | **å­ç±»å¯¹å¤–è¡Œä¸º**            | **è®¾è®¡è¯­ä¹‰**                  |
|----------------|--------------------------|-----------------------------|------------------------------|
| **public**     | ä¿æŒåŸæœ‰çš„å¯è§æ€§          | ç»§æ‰¿åŸºç±»çš„å…¬å¼€æ¥å£           | â€œ**is-a**â€å…³ç³»               |
| **protected**  | public å’Œ protected é™çº§ | å­ç±»ä½¿ç”¨åŸºç±»åŠŸèƒ½ï¼Œä½†å¯¹å¤–éšè— | å†…éƒ¨å…±äº«åŠŸèƒ½                 |
| **private**    | å…¨éƒ¨é™çº§ä¸º private       | ä»…ä½œä¸ºå­ç±»å®ç°ç»†èŠ‚           | å†…éƒ¨å®ç°å¤ç”¨ï¼Œâ€œ**has-a**â€å…³ç³» |

é€šè¿‡è¿™äº›ä¿®é¥°ç¬¦ï¼ŒC++ æä¾›äº†å¼ºå¤§çš„ç»§æ‰¿è®¿é—®æ§åˆ¶èƒ½åŠ›ï¼Œä½¿å¾—ç¨‹åºè®¾è®¡èƒ½å¤Ÿæ›´ç²¾ç¡®åœ°è¡¨è¾¾è¯­ä¹‰å’Œæ§åˆ¶è®¿é—®æƒé™ï¼ŒåŒæ—¶å…¼é¡¾çµæ´»æ€§å’Œå°è£…æ€§ã€‚

### usingä¸privateç»§æ‰¿

åœ¨ C++ ä¸­ï¼Œ**private ç»§æ‰¿** å’Œ **`using` å£°æ˜** çš„ç»“åˆå¯ä»¥ç”¨æ¥æ§åˆ¶ä»åŸºç±»ç»§æ‰¿çš„æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®æƒé™ã€‚è¿™ç§ç»„åˆç”¨æ³•èƒ½è®©å¼€å‘è€…åœ¨ç»§æ‰¿åŸºç±»çš„åŒæ—¶ï¼Œå¯¹æˆå‘˜è®¿é—®è¿›è¡Œçµæ´»è°ƒæ•´ã€‚

---

#### **1. private ç»§æ‰¿çš„è¡Œä¸ºå›é¡¾**

å½“ä¸€ä¸ªç±»ä»¥ **private** æ–¹å¼ç»§æ‰¿åŸºç±»æ—¶ï¼š
- åŸºç±»çš„ **public** å’Œ **protected** æˆå‘˜éƒ½ä¼šå˜ä¸º **private**ï¼Œå¯¹å¤–éƒ¨ä¸å¯è§ã€‚
- åŸºç±»çš„æˆå‘˜åªèƒ½é€šè¿‡æ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°è®¿é—®ï¼Œå¤–éƒ¨ä»£ç æ— æ³•ç›´æ¥è°ƒç”¨åŸºç±»çš„æˆå‘˜ã€‚

ä¾‹å¦‚ï¼š
```cpp
class Base {
public:
    void publicMethod() {}
protected:
    void protectedMethod() {}
private:
    void privateMethod() {}
};

class Derived : private Base {
public:
    void accessBase() {
        publicMethod();     // å¯ä»¥è®¿é—®ï¼Œå˜ä¸º Derived çš„ private
        protectedMethod();  // å¯ä»¥è®¿é—®ï¼Œå˜ä¸º Derived çš„ private
        // privateMethod(); // æ— æ³•è®¿é—®
    }
};

Derived d;
// d.publicMethod(); // é”™è¯¯ï¼ŒBase::publicMethod å·²å˜ä¸º private
```

---

#### **2. ä½¿ç”¨ `using` ä¿®æ”¹è®¿é—®æƒé™**

C++ ä¸­çš„ **`using` å£°æ˜** å¯ä»¥æ”¹å˜åŸºç±»ä¸­ç»§æ‰¿æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®æƒé™ã€‚å®ƒå…è®¸å¼€å‘è€…å°†ç‰¹å®šæˆå‘˜çš„è®¿é—®æƒé™é‡æ–°è°ƒæ•´ä¸º **public** æˆ– **protected**ã€‚

##### ä½¿ç”¨åœºæ™¯ï¼š
- **é€‰æ‹©æ€§å…¬å¼€åŸºç±»æˆå‘˜**ã€‚
- **ç»†ç²’åº¦æ§åˆ¶ç»§æ‰¿æ¥å£**ã€‚

---

#### **3. ç¤ºä¾‹ï¼šprivate ç»§æ‰¿ç»“åˆ `using`**

##### ç¤ºä¾‹ 1ï¼šå°†åŸºç±»çš„ `public` æˆå‘˜é‡æ–°å…¬å¼€ä¸º `public`
```cpp
class Base {
public:
    void publicMethod() {
        std::cout << "Base::publicMethod" << std::endl;
    }
};

class Derived : private Base {
public:
    using Base::publicMethod; // å°† Base çš„ publicMethod æ”¹ä¸º public
};

int main() {
    Derived d;
    d.publicMethod(); // å¯ä»¥è°ƒç”¨ publicMethod
    return 0;
}
```
åœ¨ `Derived` ä¸­ï¼Œå°½ç®¡æ˜¯ **private** ç»§æ‰¿ï¼Œä½†é€šè¿‡ `using` å°† `Base::publicMethod` æš´éœ²ä¸º **public**ã€‚

---

##### ç¤ºä¾‹ 2ï¼šå°†åŸºç±»çš„ `protected` æˆå‘˜è°ƒæ•´ä¸º `public`
```cpp
class Base {
protected:
    void protectedMethod() {
        std::cout << "Base::protectedMethod" << std::endl;
    }
};

class Derived : private Base {
public:
    using Base::protectedMethod; // å°† protectedMethod æ”¹ä¸º public
};

int main() {
    Derived d;
    d.protectedMethod(); // ç°åœ¨å¯ä»¥è°ƒç”¨
    return 0;
}
```

---

##### ç¤ºä¾‹ 3ï¼šé™åˆ¶ç‰¹å®šæˆå‘˜çš„è®¿é—®æƒé™
é€šè¿‡ **private ç»§æ‰¿** å’Œ **`using` å£°æ˜**ï¼Œå¯ä»¥é€‰æ‹©æ€§åœ°æš´éœ²æˆ–éšè—åŸºç±»æˆå‘˜ã€‚ä¾‹å¦‚ï¼Œä»…æš´éœ²æŸäº›æˆå‘˜åŠŸèƒ½ï¼Œè€Œéšè—å…¶ä»–åŠŸèƒ½ï¼š
```cpp
class Base {
public:
    void method1() {
        std::cout << "Base::method1" << std::endl;
    }
    void method2() {
        std::cout << "Base::method2" << std::endl;
    }
};

class Derived : private Base {
public:
    using Base::method1; // åªæš´éœ² method1
};

int main() {
    Derived d;
    d.method1(); // å¯è°ƒç”¨
    // d.method2(); // é”™è¯¯ï¼Œmethod2 æœªå…¬å¼€
    return 0;
}
```

---

#### **4. è®¾è®¡æ„ä¹‰ä¸ä¼˜åŠ¿**

##### (1) **ç»†åŒ–æ¥å£è®¾è®¡**
é€šè¿‡ **private ç»§æ‰¿** å’Œ **`using` å£°æ˜**ï¼Œå¯ä»¥ç»†ç²’åº¦åœ°æ§åˆ¶æ´¾ç”Ÿç±»æš´éœ²å“ªäº›åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œéšè—åŸºç±»çš„å®ç°ç»†èŠ‚ï¼ŒåŒæ—¶åªå¯¹å¤–å…¬å¼€æ´¾ç”Ÿç±»éœ€è¦çš„åŠŸèƒ½ã€‚

##### (2) **å¢å¼ºå°è£…æ€§**
- **private ç»§æ‰¿** ç¡®ä¿åŸºç±»æˆå‘˜ä¸ä¼šè¢«ç›´æ¥æš´éœ²ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„è€¦åˆã€‚
- ä½¿ç”¨ **`using` å£°æ˜** é€‰æ‹©æ€§å¼€æ”¾åŠŸèƒ½ï¼Œå¯ä»¥æå‡æ¥å£çš„çµæ´»æ€§å’Œå®‰å…¨æ€§ã€‚

##### (3) **ç®€åŒ–ä»£ç **
ä¸ä¼ ç»Ÿæ–¹å¼ï¼ˆå¦‚åœ¨æ´¾ç”Ÿç±»ä¸­æ‰‹åŠ¨å®šä¹‰ä¸€ç»„è®¿é—®å‡½æ•°ï¼‰ç›¸æ¯”ï¼Œ`using` å£°æ˜æ›´åŠ ç®€æ´ç›´è§‚ã€‚

---

#### **5. æ³¨æ„äº‹é¡¹**
- **`using` åªèƒ½è°ƒæ•´åŸºç±»å·²æœ‰æˆå‘˜çš„å¯è§æ€§**ï¼Œæ— æ³•ç›´æ¥æ”¹å˜æˆå‘˜çš„è®¿é—®æƒé™ã€‚ä¾‹å¦‚ï¼Œä¸èƒ½é€šè¿‡ `using` å°†åŸºç±»çš„ `private` æˆå‘˜æ”¹ä¸º `public`ï¼Œå› ä¸º `private` æˆå‘˜å¯¹å­ç±»æ˜¯ä¸å¯è§çš„ã€‚
- å¦‚æœåŸºç±»æˆå‘˜æœ‰å¤šä¸ªé‡è½½ï¼Œéœ€è¦åœ¨ `using` å£°æ˜ä¸­æ˜ç¡®è°ƒæ•´æ¯ä¸ªé‡è½½ï¼š
  ```cpp
  class Base {
  public:
      void func(int) {}
      void func(double) {}
  };

  class Derived : private Base {
  public:
      using Base::func; // åŒæ—¶å…¬å¼€æ‰€æœ‰é‡è½½
  };
  ```

---

#### **æ€»ç»“**

| **ç»§æ‰¿æ–¹å¼**  | **å¯¹åŸºç±»æˆå‘˜çš„é»˜è®¤å¤„ç†**     | **ç»“åˆ `using` çš„æ•ˆæœ**                   |
|---------------|-----------------------------|------------------------------------------|
| **public**    | ä¿æŒåŸæœ‰è®¿é—®æƒé™             | æ— éœ€ç»“åˆ `using`ï¼ŒåŸºç±»æˆå‘˜å·²å¯¹å¤–å…¬å¼€      |
| **protected** | `public` -> `protected`     | å¯ä»¥å°†åŸºç±»æˆå‘˜æå‡ä¸º `public` æˆ–éšè—å…¶ä»–æˆå‘˜ |
| **private**   | `public/protected` -> `private` | ç²¾ç¡®æ§åˆ¶å“ªäº›æˆå‘˜å¯¹å¤–å¯è§ï¼Œéšè—å…¶ä½™å®ç°ç»†èŠ‚ |

ç»“åˆ **private ç»§æ‰¿** å’Œ **`using` å£°æ˜**ï¼ŒC++ æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç”¨æ¥æ»¡è¶³å¤æ‚çš„ç»§æ‰¿åœºæ™¯ï¼Œæ—¢ä¿è¯äº†å°è£…æ€§ï¼Œåˆå…è®¸åœ¨éœ€è¦æ—¶é€‰æ‹©æ€§å…¬å¼€åŠŸèƒ½ã€‚


::: details  åæ§½
å¤šç§ç»§æ‰¿æ¨¡å¼,å’Œ `using`ï¼Œå®Œç¾è¯ é‡Šäº†ä»€ä¹ˆæ˜¯C++ åŠ é”å†è§£é”çš„è®¾è®¡æ¨¡å¼ï¼Œä½ æ— æ•Œäº†ã€‚
:::

### static memberä¸ç»§æ‰¿
åœ¨ C++ ä¸­ï¼Œ**é™æ€æˆå‘˜ï¼ˆ`static member`ï¼‰** æ˜¯ç±»çš„å…±äº«èµ„æºï¼Œå®ƒä¸ç»§æ‰¿çš„äº¤äº’è§„åˆ™ä¼šå½±å“å…¶è®¿é—®å’Œç®¡ç†æ–¹å¼ã€‚ä»¥ä¸‹æ˜¯å…³äºé™æ€æˆå‘˜ä¸ç»§æ‰¿çš„å…³é”®ç‚¹å’Œè®¾è®¡æ„ä¹‰ï¼š

---

#### **1. é™æ€æˆå‘˜çš„ç‰¹ç‚¹**
- **ç±»çº§åˆ«å…±äº«**ï¼šé™æ€æˆå‘˜å±äºç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯æŸä¸ªå…·ä½“å¯¹è±¡ã€‚æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªé™æ€æˆå‘˜ã€‚
- **ç‹¬ç«‹äºå®ä¾‹**ï¼šé™æ€æˆå‘˜å¯ä»¥é€šè¿‡ç±»åç›´æ¥è®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯¹è±¡è®¿é—®ã€‚
- **å­˜å‚¨ä½ç½®**ï¼šé™æ€æˆå‘˜å­˜å‚¨åœ¨ç¨‹åºçš„å…¨å±€é™æ€åŒºåŸŸï¼Œè€Œéå †æ ˆã€‚

---

#### **2. é™æ€æˆå‘˜åœ¨ç»§æ‰¿ä¸­çš„è§„åˆ™**

##### **(1) é™æ€æ•°æ®æˆå‘˜**
- å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„é™æ€æ•°æ®æˆå‘˜ï¼Œä½†é™æ€æˆå‘˜ä¾ç„¶æ˜¯ç±»çº§åˆ«çš„ï¼Œä¸ä¼šè¢«å¤åˆ¶ã€‚
- é™æ€æ•°æ®æˆå‘˜åœ¨å­ç±»ä¸­å…±äº«åŒä¸€ä»½æ•°æ®ã€‚

**ç¤ºä¾‹**ï¼š
```cpp
#include <iostream>
class Base {
public:
    static int value; // é™æ€æˆå‘˜å˜é‡
};

int Base::value = 10; // åˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡

class Derived : public Base {};

int main() {
    std::cout << Base::value << std::endl;    // è¾“å‡º 10
    std::cout << Derived::value << std::endl; // è¾“å‡º 10ï¼Œå­ç±»å…±äº«çˆ¶ç±»é™æ€æˆå‘˜

    Derived::value = 20; // ä¿®æ”¹é™æ€æˆå‘˜
    std::cout << Base::value << std::endl;    // è¾“å‡º 20ï¼Œçˆ¶ç±»çš„é™æ€æˆå‘˜ä¹Ÿæ”¹å˜äº†

    return 0;
}
```
###### **å…³é”®ç‚¹**ï¼š
- é™æ€æˆå‘˜ `value` æ˜¯ç±»çº§åˆ«çš„ï¼Œåœ¨çˆ¶ç±»å’Œå­ç±»ä¸­å…±äº«åŒä¸€ä¸ªå˜é‡ã€‚
- æ— è®ºé€šè¿‡çˆ¶ç±»è¿˜æ˜¯å­ç±»è®¿é—®ï¼Œä¿®æ”¹çš„éƒ½æ˜¯åŒä¸€ä»½æ•°æ®ã€‚

---

##### **(2) é™æ€æˆå‘˜å‡½æ•°**
- é™æ€æˆå‘˜å‡½æ•°ä¸ä¾èµ–äºå…·ä½“å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ç±»åæˆ–å¯¹è±¡è°ƒç”¨ã€‚
- å­ç±»ç»§æ‰¿çˆ¶ç±»çš„é™æ€æˆå‘˜å‡½æ•°ï¼Œå­ç±»å’Œçˆ¶ç±»å…±äº«åŒä¸€ä¸ªå‡½æ•°å®ç°ã€‚
- é™æ€æˆå‘˜å‡½æ•°æ— æ³•ç›´æ¥è®¿é—®éé™æ€æˆå‘˜ï¼ˆå› ä¸ºéé™æ€æˆå‘˜ä¾èµ–å¯¹è±¡ï¼‰ã€‚

**ç¤ºä¾‹**ï¼š
```cpp
class Base {
public:
    static void printValue() {
        std::cout << "Base::value = " << value << std::endl;
    }
    static int value;
};

int Base::value = 10;

class Derived : public Base {};

int main() {
    Base::printValue();    // è¾“å‡º Base::value = 10
    Derived::printValue(); // è¾“å‡º Base::value = 10ï¼Œå­ç±»è°ƒç”¨é™æ€æˆå‘˜å‡½æ•°

    Derived::value = 30;   // ä¿®æ”¹é™æ€æˆå‘˜å˜é‡
    Base::printValue();    // è¾“å‡º Base::value = 30

    return 0;
}
```

---

#### **3. é™æ€æˆå‘˜çš„éšè—ä¸è¦†ç›–**

åœ¨ç»§æ‰¿ä¸­ï¼Œé™æ€æˆå‘˜ä¸ä¼šåƒè™šå‡½æ•°é‚£æ ·å…·æœ‰åŠ¨æ€å¤šæ€æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé™æ€æˆå‘˜**ä¸èƒ½è¢«è¦†ç›–**ï¼Œä½†å¯ä»¥éšè—ã€‚

##### **é™æ€æˆå‘˜å‡½æ•°çš„éšè—**
- å¦‚æœå­ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªä¸çˆ¶ç±»åŒåçš„é™æ€æˆå‘˜å‡½æ•°ï¼Œçˆ¶ç±»çš„ç‰ˆæœ¬ä¼šè¢«éšè—ã€‚
- å­ç±»å’Œçˆ¶ç±»çš„é™æ€æˆå‘˜å‡½æ•°æ˜¯ç‹¬ç«‹çš„ã€‚

**ç¤ºä¾‹**ï¼š
```cpp
class Base {
public:
    static void print() {
        std::cout << "Base::print()" << std::endl;
    }
};

class Derived : public Base {
public:
    static void print() { // éšè—çˆ¶ç±»çš„é™æ€æˆå‘˜å‡½æ•°
        std::cout << "Derived::print()" << std::endl;
    }
};

int main() {
    Base::print();    // è¾“å‡º Base::print()
    Derived::print(); // è¾“å‡º Derived::print()

    Derived d;
    d.print();        // è¾“å‡º Derived::print()ï¼Œé€šè¿‡å¯¹è±¡è°ƒç”¨
    return 0;
}
```
###### **å…³é”®ç‚¹**ï¼š
- çˆ¶ç±»å’Œå­ç±»çš„é™æ€å‡½æ•°æ˜¯ç‹¬ç«‹çš„ï¼Œå­ç±»çš„åŒåå‡½æ•°åªæ˜¯éšè—äº†çˆ¶ç±»ç‰ˆæœ¬ã€‚
- è°ƒç”¨å“ªä¸ªå‡½æ•°ç”±ä½œç”¨åŸŸè§£æç¬¦å†³å®šã€‚

---

#### **4. é™æ€æˆå‘˜ä¸è®¿é—®æ§åˆ¶**

é™æ€æˆå‘˜çš„è®¿é—®æƒé™ç”± **`public`**ã€**`protected`** å’Œ **`private`** ä¿®é¥°ç¬¦å†³å®šï¼š
- **public**ï¼šå­ç±»å’Œå¤–éƒ¨ä»£ç éƒ½å¯ä»¥è®¿é—®ã€‚
- **protected**ï¼šå­ç±»å¯ä»¥è®¿é—®ï¼Œä½†å¤–éƒ¨ä»£ç æ— æ³•ç›´æ¥è®¿é—®ã€‚
- **private**ï¼šåªæœ‰çˆ¶ç±»å†…éƒ¨å¯ä»¥è®¿é—®ï¼Œå­ç±»å’Œå¤–éƒ¨ä»£ç éƒ½æ— æ³•è®¿é—®ã€‚

**ç¤ºä¾‹**ï¼š
```cpp
class Base {
private:
    static int privateValue;
protected:
    static int protectedValue;
public:
    static int publicValue;
};

int Base::privateValue = 1;
int Base::protectedValue = 2;
int Base::publicValue = 3;

class Derived : public Base {
public:
    void printValues() {
        // std::cout << privateValue << std::endl; // é”™è¯¯ï¼Œæ— æ³•è®¿é—® private æˆå‘˜
        std::cout << protectedValue << std::endl; // è¾“å‡º 2
        std::cout << publicValue << std::endl;    // è¾“å‡º 3
    }
};

int main() {
    Derived d;
    d.printValues();
    // std::cout << Derived::protectedValue << std::endl; // é”™è¯¯ï¼Œæ— æ³•è®¿é—® protected æˆå‘˜
    std::cout << Derived::publicValue << std::endl;       // è¾“å‡º 3
    return 0;
}
```

#### **æ€»ç»“**
- é™æ€æˆå‘˜åœ¨ç»§æ‰¿ä¸­æ˜¯å…±äº«çš„ï¼ˆæ— è®ºæ˜¯æ•°æ®æˆå‘˜è¿˜æ˜¯å‡½æ•°æˆå‘˜ï¼‰ã€‚
- é™æ€æˆå‘˜å‡½æ•°å¯ä»¥è¢«å­ç±»éšè—ï¼Œä½†ä¸ä¼šæœ‰å¤šæ€è¡Œä¸ºã€‚
- é€šè¿‡è®¿é—®æ§åˆ¶å’Œ `static` ä¿®é¥°ç¬¦ï¼Œé™æ€æˆå‘˜åœ¨è®¾è®¡ä¸Šèƒ½å¾ˆå¥½åœ°å¹³è¡¡å°è£…æ€§å’Œå…±äº«æ€§ã€‚



## å¤šæ€ï¼ˆPolymorphismï¼‰
1. å°è£…å’Œç»§æ‰¿åŸºæœ¬ä¸Šæ˜¯ä¸ºäº†å¤šæ€è€Œè®¾è®¡çš„
2. é¢å‘å¯¹è±¡æ˜¯ä½¿ç”¨å¤šæ€æ€§è·å¾—å¯¹ç³»ç»Ÿä¸­æ¯ä¸ªæºä»£ç ä¾èµ–é¡¹çš„ç»å¯¹æ§åˆ¶çš„èƒ½åŠ›
3. é«˜å†…èšï¼Œä½è€¦åˆæ˜¯ç¨‹åºè®¾è®¡çš„åŸºæœ¬åŸåˆ™ï¼ˆæ— è®ºæ˜¯å¦é¢å‘å¯¹è±¡ï¼‰ï¼Œè€Œå¤šæ€æ˜¯é«˜å†…èšï¼Œä½è€¦åˆçš„åŸºç¡€

### å¤šæ€ä¸é™æ€ç»‘å®šï¼ˆPolymorphism And Static Bindingï¼‰
1. å¤šæ€æŒ‡ä¸ºä¸åŒæ•°æ®ç±»å‹çš„å®ä½“æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œæˆ–ä½¿ç”¨ä¸€ä¸ªå•ä¸€çš„ç¬¦å·æ¥è¡¨ç¤ºä¸åŒçš„ç±»å‹
2. å¤šæ€æ„å‘³ç€è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œå°†æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹æ¥æ‰§è¡Œç›¸åº”çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯æ ¹æ®å¼•ç”¨æˆ–æŒ‡é’ˆçš„ç±»å‹æ¥æ‰§è¡Œ
3. é™æ€ç»‘å®šæ˜¯æŒ‡åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°ï¼Œå°†åç§°ç»‘å®šåˆ°ä¸€ä¸ªå›ºå®šçš„å‡½æ•°å®šä¹‰ä¸Šï¼Œæ¯æ¬¡è°ƒç”¨æ—¶æ‰§è¡Œè¯¥å®šä¹‰ï¼Œä¹Ÿæ˜¯å¸¸æ€æ‰§è¡Œçš„æ–¹å¼
4. åŠ¨æ€ç»‘å®šåˆ™æ˜¯åœ¨è¿è¡Œæ—¶æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹æ¥ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°

::: details é™æ€ç»‘å®šåŠå…¶ç¼ºç‚¹
åˆ›å»ºä¸‰ä¸ªç±» `Shape` -> `Rectangle` -> `Square`ï¼Œå…¶ä¸­ `Rectangle` ç»§æ‰¿è‡ª `Shape`ï¼Œ ` Square `  ç»§æ‰¿è‡ª `Rectangle`å¹¶é‡å†™ `draw` æ–¹æ³•ã€‚
```cpp
class Shape {
public:
  Shape()=default;
  ~Shape()=default;
  Shape(const string_view& name): name(name){}
  void draw() const{
    cout << "Shape Drawing " << name << endl;
  }
protected:
  string name;
};


#include "shape.h"
class Rectangle: public Shape {
public:
  Rectangle()=default;
  ~Rectangle()=default;
  Rectangle(string_view name, double width, double height): Shape(name), width(width), height(height) {};
  void draw() const {
    cout << "Rectangle Drawing  " << name<< endl;
  }
protected:
  double getWidth() const{
    return width;
  }
  double getHeight() const{
    return height;
  }
private:
  double width{0.0};
  double height{0.0};
};


#include "rectangle.h"
class Square:public Rectangle {
public:
  Square()=default;
  Square(string_view name,int side):Rectangle(name,side,side) {};
  ~Square()=default;
  void draw() const{
    cout<<"Square Drawing"<<name<<"with side :"<<getWidth()<<endl;
  }
};
```
åœ¨`main`ä¸­è¿è¡Œï¼š
```cpp
int main() {
  //! é™æ€ç»‘å®šçš„ä¸è¶³
  // ä½¿ç”¨å€¼ä¼ é€’ï¼Œåœ¨ç¼–è¯‘æ—¶ç¡®å®šå‡½æ•°è°ƒç”¨ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜
  Shape s1("Shape1");
  s1.draw();
  Rectangle r1("Rectangle1", 2, 3);
  r1.draw();
  Square sq1("Square1", 4);
  sq1.draw();
  // ä½¿ç”¨æŒ‡é’ˆä¼ é€’ï¼Œè°ƒç”¨çš„éƒ½æ˜¯çˆ¶ç±»çš„å‡½æ•°ï¼Œå› ä¸ºç¼–è¯‘æ—¶æ— æ³•ç¡®å®šæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ç±»å‹
  Shape *sp=&s1;
  sp->draw();
  sp=&r1;
  sp->draw();
  sp=&sq1;
  sp->draw();
  cout<<"-----------------------------------"<<endl;
}
```
è¿è¡Œç»“æœï¼š
```text
Shape Drawing Shape1
Rectangle Drawing  Rectangle1
Square DrawingSquare1with side :4
Shape Drawing Shape1
Shape Drawing Rectangle1
Shape Drawing Square1
-----------------------------------
```
:::

### è™šå‡½æ•°ä¸åŠ¨æ€ç»‘å®š(Vitual Function And  Dynamic Binding)
1. è™šå‡½æ•° ï¼ˆVirtual Functionï¼‰æ˜¯C++ä¸­å®ç°å¤šæ€æ€§çš„å…³é”®æœºåˆ¶ï¼Œå®ƒå…è®¸åœ¨è¿è¡Œæ—¶æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹æ¥è°ƒç”¨ç›¸åº”çš„å‡½æ•°ã€‚
2. åŠ¨æ€ç»‘å®šï¼ˆDynamic Bindingï¼‰æ˜¯æŒ‡åœ¨è¿è¡Œæ—¶æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹æ¥ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šã€‚
  - å®ç°ç»§æ‰¿
  - çˆ¶ç±»ï¼Œå­ç±»éœ€è¦åŠ¨æ€ç»‘å®šçš„å‡½æ•°è®¾ç½®æˆè™šå‡½æ•°
  - åˆ›å»ºçˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼Œè°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œä¼šæ ¹æ®æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ç±»å‹æ¥è°ƒç”¨ç›¸åº”çš„å‡½æ•°

::: details è™šå‡½æ•°ä¸åŠ¨æ€ç»‘å®š
å°† `Shape` ` Rectangle `å’Œ ` Square ` ç±»ä¸­çš„ `draw` å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ï¼š
å³ åœ¨ `Shape` ç±»ä¸­æ·»åŠ  `virtual void draw() const;`ï¼Œåœ¨ `Rectangle` ç±»ä¸­æ·»åŠ  `virtual void draw() const;`ï¼Œåœ¨ `Square` ç±»ä¸­æ·»åŠ  `virtual void draw() const;`ã€‚
åœ¨è¿è¡ŒåŒæ ·çš„ä»£ç ï¼š
åœ¨`main`ä¸­è¿è¡Œï¼š
```cpp
int main() {
  //! é™æ€ç»‘å®šçš„ä¸è¶³
  // ä½¿ç”¨å€¼ä¼ é€’ï¼Œåœ¨ç¼–è¯‘æ—¶ç¡®å®šå‡½æ•°è°ƒç”¨ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜
  Shape s1("Shape1");
  s1.draw();
  Rectangle r1("Rectangle1", 2, 3);
  r1.draw();
  Square sq1("Square1", 4);
  sq1.draw();
  // ä½¿ç”¨æŒ‡é’ˆä¼ é€’ï¼Œè°ƒç”¨çš„éƒ½æ˜¯çˆ¶ç±»çš„å‡½æ•°ï¼Œå› ä¸ºç¼–è¯‘æ—¶æ— æ³•ç¡®å®šæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ç±»å‹
  Shape *sp=&s1;
  sp->draw();
  sp=&r1;
  sp->draw();
  sp=&sq1;
  sp->draw();
  cout<<"-----------------------------------"<<endl;
}
```
è¿è¡Œç»“æœ å˜æˆäº†ï¼š
```text
Shape Drawing Shape1
Rectangle Drawing  Rectangle1
Square DrawingSquare1with side :4
Shape Drawing Shape1
Rectangle Drawing  Rectangle1
Square DrawingSquare1with side :4
-----------------------------------
```
:::

### å¤šæ€å¯¹è±¡çš„åº”ç”¨åœºæ™¯ä¸å¤§å°ï¼ˆ  ï¼‰
1. åº”ç”¨åœºæ™¯
  - å‡½æ•°
  - å­˜å‚¨è¿›å…¥Collections
2. å¤šæ€ä¸Collections
  - å¤šæ€å¯¹è±¡å­˜å‚¨åœ¨Collectionsä¸­ï¼Œéœ€è¦ä½¿ç”¨æŒ‡é’ˆæˆ–å¼•ç”¨

::: details å¤šæ€å¯¹è±¡çš„åº”ç”¨åœºæ™¯
```cpp
void draw_shape(Shape *s){
  s->draw();
}
int main() {
  Shape s1("Shape1");
  Rectangle r1("Rectangle1", 2, 3);
  Square sq1("Square1", 4);
  Shape *sp1=&s1;
  draw_shape(sp1);
  sp1=&r1;
  draw_shape(sp1);
  sp1=&sq1;
  draw_shape(sp1);
  cout<<"--------------collections---------------------"<<endl;
  // collections
  Shape shapes[]{s1,r1,sq1};
  for(auto &s:shapes){
    s.draw();
  }// ä¸æ»¡è¶³å¤šæ€
  //Shape &shape[3]={s1,r1,sq1}; å¼•ç”¨ä¸èƒ½åšæ•°ç»„
  Shape *shape[3]={&s1,&r1,&sq1};// æ»¡è¶³å¤šæ€
  for(auto &s:shape){
    s->draw();
  }
  cout<<"-----------------------------------"<<endl;
}
```
è¿è¡Œç»“æœï¼š
```text
Shape Drawing Shape1
Rectangle Drawing  Rectangle1
Square DrawingSquare1with side :4
--------------collections---------------------
Shape Drawing Shape1
Shape Drawing Rectangle1
Shape Drawing Square1
Shape Drawing Shape1
Rectangle Drawing  Rectangle1
Square DrawingSquare1with side :4
-----------------------------------
```
:::

::: details å¤šæ€å¯¹è±¡çš„å†…å­˜å¸ƒå±€
ä½¿ç”¨`sizeof` æŸ¥çœ‹å¯¹è±¡çš„å¤§å°ï¼š
```cpp
int main() {
  cout<<"sizeof(Shape):"<<sizeof(Shape)<<endl;          // S=32   D=40
  cout<<"sizeof(Rectangle):"<<sizeof(Rectangle)<<endl;  // S=48   D=56
  cout<<"sizeof(Square):"<<sizeof(Square)<<endl;        // S=48   D=56
}
```
å½“å°† `draw` æ–¹æ³•å£°æ˜ä¸ºè™šå‡½æ•°æ—¶ï¼Œ`sizeof` çš„å€¼ä¼šå‘ç”Ÿå˜åŒ–ï¼ŒåŸå› åœ¨äºè™šå‡½æ•°æœºåˆ¶çš„å®ç°éœ€è¦é¢å¤–çš„å­˜å‚¨æ¥æ”¯æŒ**åŠ¨æ€ç»‘å®š**ã€‚

---

#### **1. è™šå‡½æ•°çš„æœºåˆ¶**
- åœ¨ C++ ä¸­ï¼Œè™šå‡½æ•°çš„åŠ¨æ€ç»‘å®šæ˜¯é€šè¿‡**è™šå‡½æ•°è¡¨ï¼ˆvtableï¼‰**å®ç°çš„ã€‚
- **è™šå‡½æ•°è¡¨ï¼ˆvtableï¼‰**æ˜¯ä¸€ä¸ªä¸ç±»ç›¸å…³çš„ç»“æ„ï¼ŒåŒ…å«æŒ‡å‘è™šå‡½æ•°çš„æŒ‡é’ˆã€‚
- æ¯ä¸ªåŒ…å«è™šå‡½æ•°çš„ç±»ï¼Œå…¶å¯¹è±¡ä¼šä¿å­˜ä¸€ä¸ªæŒ‡å‘ vtable çš„æŒ‡é’ˆï¼Œé€šå¸¸ç§°ä¸º**è™šè¡¨æŒ‡é’ˆï¼ˆvptrï¼‰**ã€‚
- å½“ä½ è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œç¨‹åºé€šè¿‡ `vptr` æŸ¥æ‰¾ vtableï¼Œå¹¶æ‰§è¡Œå¯¹åº”çš„å‡½æ•°ã€‚

---

#### **2. `sizeof` çš„å˜åŒ–åŸå› **
- å½“ç±»ä¸­å£°æ˜äº†è™šå‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¸ºè¯¥ç±»ç”Ÿæˆä¸€ä¸ª `vtable`ã€‚
- æ¯ä¸ªå¯¹è±¡ä¼šå¢åŠ ä¸€ä¸ªé¢å¤–çš„æŒ‡é’ˆæˆå‘˜ï¼ˆ`vptr`ï¼‰ï¼Œç”¨äºæŒ‡å‘ vtableã€‚
- `sizeof` çš„å€¼å¢åŠ æ˜¯å› ä¸º**å¯¹è±¡çš„å†…å­˜å¸ƒå±€**ä¸­åŒ…å«äº†è¿™ä¸ªé¢å¤–çš„æŒ‡é’ˆã€‚

**ç¤ºä¾‹**ï¼š
```cpp
class Shape {
public:
  virtual void draw() const { /* è™šå‡½æ•° */ }
  // ...
};

class Rectangle : public Shape {
public:
  virtual void draw() const override { /* è™šå‡½æ•° */ }
  // ...
};

class Square : public Rectangle {
public:
  virtual void draw() const override { /* è™šå‡½æ•° */ }
  // ...
};
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼š
- `Shape`ã€`Rectangle` å’Œ `Square` éƒ½æœ‰è™šå‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šä¸ºå®ƒä»¬ç”Ÿæˆè™šè¡¨ã€‚
- æ¯ä¸ªå¯¹è±¡ï¼ˆ`Shape`ã€`Rectangle`ã€`Square` çš„å®ä¾‹ï¼‰éƒ½ä¼šåŒ…å«ä¸€ä¸ª `vptr`ã€‚

å¯¹äºä¸€ä¸ª 64 ä½æ¶æ„çš„ç³»ç»Ÿï¼Œ`vptr` é€šå¸¸å ç”¨ **8 å­—èŠ‚**ï¼ˆä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼‰ã€‚
åœ¨å¤šé‡ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡å¯èƒ½ä¼šæœ‰å¤šä¸ªè™šè¡¨æŒ‡é’ˆï¼ˆ`vptr`ï¼‰ï¼Œå› ä¸ºæ¯ä¸ªåŸºç±»å¯èƒ½ç»´æŠ¤ç‹¬ç«‹çš„è™šè¡¨ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„å¤§å°ä¼šå› ä¸ºå¤šä¸ªè™šè¡¨æŒ‡é’ˆè€Œå¢åŠ ã€‚

#### **3. ä¸ºä»€ä¹ˆä¼šè®¾è®¡è™šå‡½æ•°è¡¨æœºåˆ¶**
- **åŠ¨æ€å¤šæ€æ€§**ï¼šè™šå‡½æ•°è¡¨ä½¿å¾—æ´¾ç”Ÿç±»å¯ä»¥é‡å†™åŸºç±»çš„æ–¹æ³•ï¼Œè¿è¡Œæ—¶åŠ¨æ€å†³å®šè°ƒç”¨å“ªä¸ªç‰ˆæœ¬çš„å‡½æ•°ã€‚
- **æŒ‡é’ˆç»Ÿä¸€æ€§**ï¼šé€šè¿‡åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨æ´¾ç”Ÿç±»çš„è™šå‡½æ•°æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„é‡è¦ç‰¹æ€§ã€‚

---

#### **æ€»ç»“**
- å½“ç±»ä¸­åŒ…å«è™šå‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆè™šå‡½æ•°è¡¨ï¼ˆvtableï¼‰ï¼Œæ¯ä¸ªå¯¹è±¡ä¼šå¤šå‡ºä¸€ä¸ªè™šè¡¨æŒ‡é’ˆï¼ˆvptrï¼‰ã€‚
- ç”±äºå¢åŠ äº†è™šè¡¨æŒ‡é’ˆï¼Œ`sizeof` çš„å€¼ä¼šå¢å¤§ã€‚
- è¿™ç§è®¾è®¡æ˜¯æ”¯æŒåŠ¨æ€ç»‘å®šçš„ä»£ä»·ï¼Œä¹Ÿæ˜¯ C++ å®ç°å¤šæ€æ€§çš„é‡è¦åŸºç¡€ã€‚

:::


### override ä¸ final
1. override å­ç±»çš„è‡ªæ£€åŠŸèƒ½ï¼Œæ£€æŸ¥æ˜¯å¦é‡å†™äº†åŸºç±»çš„è™šå‡½æ•°ï¼Œé˜²æ­¢æ‹¼å†™é”™è¯¯ï¼ˆçœŸçš„æ˜¯è²Œä¼¼åªæœ‰è¿™ä¸€ä¸ªgeåŠŸèƒ½,ä¸æ„§æ˜¯ä½ ï¼Œå¤ªè‡ªç”±äº†ğŸ˜’ï¼‰
  - å¦‚æœçˆ¶ç±» æ²¡æœ‰è¿™ä¸ªå‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™
2. final ç¦æ­¢ç»§æ‰¿ï¼Œé˜²æ­¢å­ç±»é‡å†™
  - final å¯ä»¥ç”¨äºç±»ï¼Œä¹Ÿå¯ä»¥ç”¨äºè™šå‡½æ•°ï¼Œç¦æ­¢ç»§æ‰¿æˆ–é‡å†™

### ææ„å‡½æ•°ä¸å¤šæ€
1. ææ„å‡½æ•°åœ¨å€¼ç±»å‹ä¸­ï¼Œä¼šä¾æ¬¡è°ƒç”¨ç»§æ‰¿çš„ææ„å‡½æ•°
2. ææ„å‡½æ•°åœ¨å¼•ç”¨ç±»å‹ä¸­ï¼Œåªä¼šè°ƒç”¨å½“å‰å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œä¸ä¼šè°ƒç”¨ç»§æ‰¿çš„ææ„å‡½æ•°ï¼ˆä¸€èˆ¬å°±æ˜¯è¯´çˆ¶ç±»ï¼‰
3. éœ€è¦å°†ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œæ‰èƒ½ä¿è¯åœ¨å¼•ç”¨ç±»å‹ä¸­è°ƒç”¨ç»§æ‰¿çš„ææ„å‡½æ•°

### Dynamic_cast ç±»å‹è½¬æ¢
1. å¤šæ€å¯¹è±¡çš„ç¼ºç‚¹ï¼šä¸èƒ½ç›´æ¥è®¿é—®å­ç±»ç‰¹æœ‰çš„æˆå‘˜
2. ä½¿ç”¨dynamic_cast è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå¯ä»¥è®¿é—®å­ç±»ç‰¹æœ‰çš„æˆå‘˜

::: details C++ dynamic_cast ç±»å‹è½¬æ¢
åŠ¨ç‰©ç±»å’Œå­ç±»çš„è½¬æ¢
```cpp
#include <iostream>
#include <typeinfo> // std::bad_cast
using namespace std;

// åŸºç±»ï¼šAnimal
class Animal {
public:
    virtual ~Animal() = default; // å¿…é¡»æœ‰è™šå‡½æ•°ï¼Œdynamic_cast æ‰èƒ½å·¥ä½œ
    virtual void speak() const {
        cout << "Animal speaks." << endl;
    }
};

// æ´¾ç”Ÿç±»ï¼šDog
class Dog : public Animal {
public:
    void speak() const override {
        cout << "Woof! I am a Dog." << endl;
    }
    void fetch() const {
        cout << "Fetching the ball!" << endl;
    }
};

// æ´¾ç”Ÿç±»ï¼šCat
class Cat : public Animal {
public:
    void speak() const override {
        cout << "Meow! I am a Cat." << endl;
    }
};

void animalAction(Animal* animal) {
    // å°è¯•å°† Animal* è½¬æ¢ä¸º Dog*
    Dog* dog = dynamic_cast<Dog*>(animal);
    if (dog) {
        // å¦‚æœè½¬æ¢æˆåŠŸï¼Œè°ƒç”¨ Dog çš„ç‰¹å®šæ–¹æ³•
        dog->fetch();
    } else {
        cout << "This is not a Dog." << endl;
    }
}

int main() {
    Animal* a1 = new Dog();
    Animal* a2 = new Cat();

    a1->speak(); // åŠ¨æ€ç»‘å®šï¼Œè¾“å‡º "Woof! I am a Dog."
    a2->speak(); // åŠ¨æ€ç»‘å®šï¼Œè¾“å‡º "Meow! I am a Cat."

    animalAction(a1); // è¾“å‡º "Fetching the ball!"
    animalAction(a2); // è¾“å‡º "This is not a Dog."

    delete a1;
    delete a2;

    return 0;
}
```
è¾“å‡ºç»“æœï¼š
```text
Woof! I am a Dog.
Meow! I am a Cat.
Fetching the ball!
This is not a Dog.
```
åœ¨å¤šæ€æƒ…å†µä¸‹ï¼Œ`dynamic_cast` æ˜¯åŒºåˆ†æ´¾ç”Ÿç±»å¯¹è±¡çš„æœ‰åŠ›å·¥å…·ã€‚å®ƒèƒ½å¤Ÿé¿å…éæ³•è½¬æ¢å¯¼è‡´çš„æœªå®šä¹‰è¡Œä¸ºï¼Œè€Œåœ¨è¿è¡Œæ—¶æä¾›ç±»å‹å®‰å…¨æ€§ã€‚
:::

::: details C++é£æ ¼çš„ç±»å‹è½¬æ¢
C++ é£æ ¼çš„ç±»å‹è½¬æ¢ä¸»è¦æœ‰ **4 ç§ç±»å‹è½¬æ¢è¿ç®—ç¬¦**ï¼Œæ¯ç§é€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚è¿™äº›è¿ç®—ç¬¦æ˜¯ä¸ºäº†è§£å†³ä¼ ç»Ÿ C é£æ ¼ç±»å‹è½¬æ¢çš„ä¸å®‰å…¨å’Œä¸æ˜ç¡®é—®é¢˜è€Œå¼•å…¥çš„ã€‚

---

#### **1. `static_cast`**
ç”¨äºæ‰§è¡Œåœ¨ç¼–è¯‘æœŸæ£€æŸ¥çš„æ˜¾å¼ç±»å‹è½¬æ¢ï¼Œé€‚ç”¨äºä¸¤ç§ç±»å‹ä¹‹é—´æ˜ç¡®çš„ã€åˆæ³•çš„è½¬æ¢ã€‚

##### **ç”¨æ³•å’Œç‰¹ç‚¹ï¼š**
- **å®‰å…¨æ€§ï¼š** ç¼–è¯‘å™¨åœ¨è½¬æ¢æ—¶ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ã€‚
- **é€‚ç”¨åœºæ™¯ï¼š**
  - åŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼ˆå¦‚ `int` è½¬ `float`ï¼‰ã€‚
  - çˆ¶ç±»å’Œå­ç±»ä¹‹é—´çš„æŒ‡é’ˆæˆ–å¼•ç”¨è½¬æ¢ï¼ˆçˆ¶å­ç±»ä¹‹é—´éœ€æœ‰æ˜ç¡®çš„ç»§æ‰¿å…³ç³»ï¼‰ã€‚
  - å‡½æ•°æŒ‡é’ˆç±»å‹çš„è½¬æ¢ï¼ˆè¦æ±‚å…¼å®¹ï¼‰ã€‚
  - å°† `void*` è½¬æ¢å›å…·ä½“ç±»å‹çš„æŒ‡é’ˆã€‚

##### **ç¤ºä¾‹ï¼š**
```cpp
int a = 10;
float b = static_cast<float>(a); // ä» int è½¬æ¢ä¸º float

class Base {};
class Derived : public Base {};
Base* base = new Derived();
Derived* derived = static_cast<Derived*>(base); // çˆ¶ç±»æŒ‡é’ˆè½¬æ¢ä¸ºå­ç±»æŒ‡é’ˆ
```

---

#### **2. `dynamic_cast`**
ä¸»è¦ç”¨äº **å¤šæ€** ç±»å‹ä¹‹é—´çš„å®‰å…¨è½¬æ¢ï¼Œåªèƒ½ç”¨äºå«æœ‰è™šå‡½æ•°çš„ç±»ï¼Œè¿è¡Œæ—¶ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ã€‚

##### **ç”¨æ³•å’Œç‰¹ç‚¹ï¼š**
- **å®‰å…¨æ€§ï¼š** å¦‚æœè½¬æ¢å¤±è´¥ï¼Œè¿”å› `nullptr`ï¼ˆå¯¹äºæŒ‡é’ˆï¼‰æˆ–æŠ›å‡º `std::bad_cast` å¼‚å¸¸ï¼ˆå¯¹äºå¼•ç”¨ï¼‰ã€‚
- **é€‚ç”¨åœºæ™¯ï¼š**
  - å°†çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨è½¬æ¢ä¸ºå­ç±»æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚
  - ç¡®ä¿è½¬æ¢çš„ç±»å‹æ˜¯åˆæ³•çš„è¿è¡Œæ—¶ç±»å‹ã€‚

##### **ç¤ºä¾‹ï¼š**
```cpp
class Base {
public:
    virtual ~Base() = default; // å¿…é¡»æœ‰è™šå‡½æ•°
};

class Derived : public Base {};

Base* base = new Derived();
Derived* derived = dynamic_cast<Derived*>(base); // æˆåŠŸ
Base* anotherBase = new Base();
Derived* invalid = dynamic_cast<Derived*>(anotherBase); // è¿”å› nullptr
```

---

#### **3. `const_cast`**
ç”¨äºç§»é™¤æˆ–æ·»åŠ  `const` å’Œ `volatile` ä¿®é¥°ç¬¦ã€‚å¸¸ç”¨äºéœ€è¦ä¿®æ”¹å¸¸é‡å¯¹è±¡çš„åœºæ™¯ï¼Œä½†é€šå¸¸ä¸æ¨èè¿™ç§æ“ä½œã€‚

##### **ç”¨æ³•å’Œç‰¹ç‚¹ï¼š**
- **å®‰å…¨æ€§ï¼š** ç¼–è¯‘å™¨å…è®¸ï¼Œä½†ä¿®æ”¹å®é™…çš„å¸¸é‡å¯èƒ½å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚
- **é€‚ç”¨åœºæ™¯ï¼š**
  - ç§»é™¤ `const` æˆ– `volatile` é™å®šç¬¦ã€‚

##### **ç¤ºä¾‹ï¼š**
```cpp
const int a = 10;
int* b = const_cast<int*>(&a);
*b = 20; // å¯èƒ½å¯¼è‡´æœªå®šä¹‰è¡Œä¸º
```

---

#### **4. `reinterpret_cast`**
ç”¨äºæ‰§è¡Œ **ä»»æ„æŒ‡é’ˆç±»å‹** æˆ– **æ•°æ®ç±»å‹** ä¹‹é—´çš„å¼ºåˆ¶è½¬æ¢ï¼Œä¸è¿›è¡Œä»»ä½•ç±»å‹æ£€æŸ¥æˆ–å®‰å…¨ä¿éšœã€‚

##### **ç”¨æ³•å’Œç‰¹ç‚¹ï¼š**
- **å®‰å…¨æ€§ï¼š** æä¸å®‰å…¨ï¼Œå¯èƒ½å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚
- **é€‚ç”¨åœºæ™¯ï¼š**
  - å°†æŒ‡é’ˆç±»å‹è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ï¼Œæˆ–åä¹‹ã€‚
  - å°†ä¸€ä¸ªç±»å‹çš„æŒ‡é’ˆå¼ºåˆ¶è½¬æ¢ä¸ºå¦ä¸€ç§å®Œå…¨æ— å…³çš„ç±»å‹ã€‚

##### **ç¤ºä¾‹ï¼š**
```cpp
int a = 10;
void* ptr = reinterpret_cast<void*>(&a); // int* è½¬æ¢ä¸º void*
int* b = reinterpret_cast<int*>(ptr);    // void* è½¬å› int*
```

---

#### **C++ é£æ ¼ç±»å‹è½¬æ¢çš„ä¼˜ç‚¹**
1. **æ›´æ˜ç¡®çš„è¯­ä¹‰ï¼š** ä¸åŒçš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦æœ‰ç‰¹å®šçš„ç”¨é€”ï¼Œä¾¿äºä»£ç é˜…è¯»å’Œç†è§£ã€‚
2. **æ›´é«˜çš„å®‰å…¨æ€§ï¼š** åœ¨ç¼–è¯‘æœŸå’Œè¿è¡ŒæœŸæä¾›ç±»å‹æ£€æŸ¥ï¼Œé¿å…ä¸€äº›æ½œåœ¨é”™è¯¯ã€‚
3. **æ›´å¥½çš„è°ƒè¯•æ”¯æŒï¼š** æ¯”ä¼ ç»Ÿ C é£æ ¼è½¬æ¢æ›´å®¹æ˜“è¿½è¸ªå’Œæ’æŸ¥é”™è¯¯ã€‚

---

#### **æ€»ç»“å¯¹æ¯”**

| ç±»å‹è½¬æ¢è¿ç®—ç¬¦ | ä¸»è¦ç”¨é€”                         | æ˜¯å¦è¿è¡Œæ—¶æ£€æŸ¥ | å®‰å…¨æ€§ |
|----------------|----------------------------------|----------------|--------|
| `static_cast`  | åˆæ³•çš„ã€æ˜¾å¼çš„ç¼–è¯‘æœŸè½¬æ¢         | å¦             | è¾ƒé«˜   |
| `dynamic_cast` | å¤šæ€ç±»å‹çš„å®‰å…¨è½¬æ¢               | æ˜¯             | è¾ƒé«˜   |
| `const_cast`   | å»æ‰æˆ–æ·»åŠ  `const` å’Œ `volatile` | å¦             | è¾ƒä½   |
| `reinterpret_cast` | ä»»æ„ç±»å‹çš„å¼ºåˆ¶è½¬æ¢             | å¦             | æœ€ä½   |
:::

### typeid ç±»å‹è¯†åˆ«
1. `typeid` è¿ç®—ç¬¦ç”¨äºè·å–è¡¨è¾¾å¼çš„ç±»å‹ä¿¡æ¯ã€‚æ³¨æ„ï¼š`typeid` æ˜¯æ“ä½œç¬¦ï¼Œä¸æ˜¯å‡½æ•°ã€‚
::: details `typeid` 
```cpp
int main() {
  cout<<"typeid Float:"<<typeid(float).name()<<endl; // f ä¸åŒç¼–è¯‘å™¨å¯èƒ½ä¸åŒ
  cout<<"typeid int:"<<typeid(int).name()<<endl;// i

  Rectangle r1("Rectangle1", 2, 3);
  Shape *s1=&r1;
  Shape &s2=r1;
  cout<<"typeid Pointer:"<<typeid(s1).name()<<endl; // P5Shape
  cout<<"typeid Reference:"<<typeid(s2).name()<<endl; // 9Rectangle
  cout<<"typeid Value:"<<typeid(r1).name()<<endl; // 9Rectangle
}
```
:::

### çº¯è™šå‡½æ•°ä¸æŠ½è±¡ç±»
1. çº¯è™šå‡½æ•°ï¼ˆPure Virtual Functionï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„è™šå‡½æ•°ï¼Œå®ƒæ²¡æœ‰å‡½æ•°ä½“ï¼Œå¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°ã€‚çº¯è™šå‡½æ•°é€šè¿‡åœ¨å‡½æ•°å£°æ˜åé¢åŠ ä¸Š `= 0` æ¥å®šä¹‰
  - ` virtual è¿”å›å€¼ç±»å‹ func(...Args) const=0 `
2. æŠ½è±¡ç±»ï¼ˆAbstract Classï¼‰æ˜¯ ä¸€ä¸ªåŒ…å«è‡³å°‘ä¸€ä¸ªçº¯è™šå‡½æ•°çš„ç±»ã€‚æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½ä½œä¸ºåŸºç±»ä½¿ç”¨ã€‚
3. çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å®šä¹‰æ¥å£ï¼Œå¼ºåˆ¶æ´¾ç”Ÿç±»å®ç°ç‰¹å®šçš„è¡Œä¸ºã€‚

::: details çº¯è™šå‡½æ•°ä¸æŠ½è±¡ç±»
This is a details block.
:::

### æ¥å£æŠ½è±¡ç±»

#### **å®šä¹‰**
åœ¨ C++ ä¸­ï¼Œæ¥å£å¼æŠ½è±¡ç±»æ˜¯ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»ï¼Œå…¶å”¯ä¸€ç›®çš„æ˜¯å®šä¹‰æ¥å£ï¼Œæ‰€æœ‰æˆå‘˜å‡½æ•°éƒ½æ˜¯çº¯è™šå‡½æ•° (`= 0`)ï¼Œè€Œæ²¡æœ‰ä»»ä½•æˆå‘˜å˜é‡æˆ–å‡½æ•°å®ç°ã€‚

æ¥å£å¼æŠ½è±¡ç±»ä¸ Java æˆ– C# ä¸­çš„â€œæ¥å£â€æ¦‚å¿µç›¸ä¼¼ï¼Œä½†ç”±äº C++ æ²¡æœ‰ç›´æ¥çš„â€œæ¥å£â€å…³é”®å­—ï¼Œå› æ­¤é€šè¿‡æŠ½è±¡ç±»æ¥å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚

---

#### **ç‰¹ç‚¹**
1. **çº¯æ¥å£ï¼š** æ‰€æœ‰æˆå‘˜å‡½æ•°å¿…é¡»æ˜¯çº¯è™šå‡½æ•° (`= 0`)ã€‚
2. **æ— æˆå‘˜å˜é‡ï¼š** ä¸åŒ…å«ä»»ä½•éé™æ€æˆå‘˜å˜é‡ã€‚
3. **ç»§æ‰¿ç›®çš„ï¼š** ä¸»è¦ç”¨äºå¤šæ€æ€§ï¼Œä½œä¸ºå…¶ä»–ç±»çš„æ¥å£è§„èŒƒã€‚
4. **å®ä¾‹åŒ–é™åˆ¶ï¼š** æ— æ³•ç›´æ¥å®ä¾‹åŒ–ã€‚
5. **é€šå¸¸å‘½åçº¦å®šï¼š** æ¥å£ç±»å¸¸ä»¥ `I` ä¸ºå‰ç¼€ï¼ˆéå¼ºåˆ¶ï¼‰ã€‚

---

#### **ç¤ºä¾‹**
```cpp
// å®šä¹‰æ¥å£å¼æŠ½è±¡ç±»
class IDrawable {
public:
    virtual void draw() const = 0;    // çº¯è™šå‡½æ•°
    virtual ~IDrawable() = default;  // è™šææ„å‡½æ•°
};

// å®ç°æ¥å£çš„ç±»
class Circle : public IDrawable {
public:
    void draw() const override {
        cout << "Drawing Circle" << endl;
    }
};

class Rectangle : public IDrawable {
public:
    void draw() const override {
        cout << "Drawing Rectangle" << endl;
    }
};

// ä½¿ç”¨æ¥å£
void render(const IDrawable& drawable) {
    drawable.draw();
}

int main() {
    Circle circle;
    Rectangle rectangle;

    render(circle);       // è¾“å‡ºï¼šDrawing Circle
    render(rectangle);    // è¾“å‡ºï¼šDrawing Rectangle
    return 0;
}
```

---

#### **æ¥å£å¼æŠ½è±¡ç±»çš„æ„ä¹‰**
1. **æ¥å£å®šä¹‰ï¼š** é€šè¿‡çº¯è™šå‡½æ•°å®šä¹‰äº†ç»Ÿä¸€çš„æ¥å£ï¼Œå¼ºåˆ¶æ´¾ç”Ÿç±»å®ç°ã€‚
2. **å¤šæ€æ€§æ”¯æŒï¼š** åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨å¯è°ƒç”¨æ´¾ç”Ÿç±»çš„é‡å†™æ–¹æ³•ã€‚
3. **è§£è€¦è®¾è®¡ï¼š** æä¾›çµæ´»çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œæ´¾ç”Ÿç±»ä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€‚
4. **é¢å‘æ¥å£ç¼–ç¨‹ï¼š** å°†å®ç°ç»†èŠ‚ä¸æ¥å£åˆ†ç¦»ï¼Œæé«˜ä»£ç çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

---

#### **æ¥å£å¼æŠ½è±¡ç±» vs æŠ½è±¡ç±»**
| **ç‰¹æ€§**             | **æ¥å£å¼æŠ½è±¡ç±»**                | **æ™®é€šæŠ½è±¡ç±»**                       |
|--------------------|-----------------------------|-----------------------------------|
| **çº¯è™šå‡½æ•°**         | æ‰€æœ‰å‡½æ•°å¿…é¡»æ˜¯çº¯è™šå‡½æ•°ã€‚         | å¯ä»¥æœ‰çº¯è™šå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æœ‰æ™®é€šæˆå‘˜å‡½æ•°ã€‚       |
| **æˆå‘˜å˜é‡**         | ä¸èƒ½åŒ…å«éé™æ€æˆå‘˜å˜é‡ã€‚          | å¯ä»¥åŒ…å«éé™æ€æˆå‘˜å˜é‡ã€‚                |
| **è®¾è®¡ç›®çš„**         | ç”¨ä½œæ¥å£è§„èŒƒã€‚                  | ç”¨ä½œæ¥å£æˆ–åŸºç¡€å®ç°ã€‚                 |
| **å®ä¾‹åŒ–é™åˆ¶**       | ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ã€‚                | åŒæ ·ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ã€‚                 |
| **ä½¿ç”¨åœºæ™¯**         | ç”¨äºå®šä¹‰æ¥å£çš„åŠŸèƒ½è§„èŒƒã€‚           | ç”¨äºæŠ½è±¡å®ç°ï¼Œæˆ–è€…æä¾›éƒ¨åˆ†é»˜è®¤åŠŸèƒ½çš„åŸºç±»ã€‚ |

---

#### **æ¥å£å¼æŠ½è±¡ç±»çš„è™šææ„å‡½æ•°**
- å¿…é¡»æä¾›ä¸€ä¸ªè™šææ„å‡½æ•°ï¼Œå³ä½¿æ¥å£ç±»æœ¬èº«ä¸éœ€è¦ææ„é€»è¾‘ã€‚
- ç¡®ä¿é€šè¿‡åŸºç±»æŒ‡é’ˆåˆ é™¤å¯¹è±¡æ—¶ï¼Œå¯ä»¥æ­£ç¡®è°ƒç”¨æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ã€‚

**ç¤ºä¾‹ï¼š**
```cpp
class IDrawable {
public:
    virtual ~IDrawable() = default; // è™šææ„å‡½æ•°
    virtual void draw() const = 0;  // çº¯è™šå‡½æ•°
};
```

---

æ¥å£å¼æŠ½è±¡ç±»ä¸º C++ æä¾›äº†ç±»ä¼¼äº Java å’Œ C# æ¥å£çš„èƒ½åŠ›ï¼Œå¹¿æ³›ç”¨äºè®¾è®¡ä¸­é—´ä»¶ã€æ¡†æ¶å’Œé«˜æ‰©å±•æ€§ä»£ç ç»“æ„ã€‚